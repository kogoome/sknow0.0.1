<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>timelog</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>
  </head>
  <body>
    <h1>timelog</h1>
    <label for="do_name_input">asdfasdfd
    <input type="text" id="do_name_input" onkeydown="enter()" />
    <button onclick="addbutton()">TODO</button>
    <div id="buttons"></div>
    <h2></h2>
    <div id="timelog"></div>
    <canvas id="myChart" width="400" height="400"></canvas>
  </body>
  <script>
    const do_name_input = document.getElementById('do_name_input')
    const buttons = document.getElementById('buttons')
    const timelog = document.getElementById('timelog')
    const list = []

    const enter = () => {
      if (event.keyCode == 13) {
        addbutton()
      }
    }

    const addbutton = () => {
      if (
        list.includes(do_name_input.value) ||
        do_name_input.value.length === 0
      ) {
        do_name_input.value = ''
      } else {
        list.push(do_name_input.value)
        const label = document.createElement('label')
        const radio = `<input type="radio" class="button" name="todo" onclick="log(event)"/>${do_name_input.value}`
        label.innerHTML = radio
        //label.setAttribute('onclick', '')
        buttons.appendChild(label)
        do_name_input.value = ''
      }
    }

    const log = (e) => {
      if (e.target.checked) {
        const now = new Date()
        const hour = now.getHours()
        const min = now.getMinutes()
        const sec = now.getSeconds()
        const do_name_btn = e.target.parentElement.innerText
        const div = document.createElement('div')
        div.innerText = `${hour}:${min}:${sec} ${do_name_btn}`
        timelog.appendChild(div)
      }
    }
  </script>

  <script>
    var ctx = document.getElementById('myChart').getContext('2d')
    var myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [
          {
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)',
            ],
            borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)',
            ],
            borderWidth: 1,
          },
        ],
      },
      options: {
        scales: {
          y: {
            beginAtZero: true,
          },
        },
      },
    })
  </script>
</html>
